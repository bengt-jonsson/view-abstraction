%%%%%%%%%NEXT FIGURE%%%%%%%%%%
\begin{tikzpicture}[]%show background rectangle]

\node[rounded corners,draw,name=cell0,minimum width=20pt, minimum height=120pt]{};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\small,inner sep=0pt] at ($(cell0.north west)+(1.6pt,-15pt)$){{$\thread_1$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\small,inner sep=0pt]at ($(cell0.north west)+(1.6pt,-55pt)$){$\thread_1$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\small,inner sep=0pt]at ($(cell0.north west)+(1.6pt,-95pt)$){$\thread_2$};
\node[name=succ0,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell0.east)+(-3pt,40pt)$) {};
\node[name=succ01,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell0.east)+(-3pt,-0pt)$) {};
\node[name=succ02,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell0.east)+(-3pt,-40pt)$) {};

\draw ($(cell0.north west)+(0pt,-40pt)$) -- ($(cell0.north west)+(20pt,-40pt)$);
\draw ($(cell0.north west)+(0pt,-80pt)$) -- ($(cell0.north west)+(20pt,-80pt)$);
%\draw ($(cell0.north west)+(10pt,0pt)$) -- ($(cell0.south west)+(10pt,0pt)$);
\node[anchor=south,font=\tiny,align=center] at ($(cell0.north)+(0pt,-2pt)$) {{\tt pools}};
\node[anchor=south,font=\tiny,align=center] at ($(succ0.north)+(18pt,-2pt)$) {${\tt top_1}$};
\node[anchor=south,font=\tiny,align=center] at ($(succ01.north)+(18pt,-2pt)$) {${\tt top_2}$};
\node[anchor=south,font=\tiny,align=center] at ($(succ02.north)+(18pt,-2pt)$) {${\tt top_3}$};



\node[rounded corners,draw,name=cell1,minimum width=16pt, minimum height=30pt] at ($(cell0.east)+(37pt,40pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt,scale=0.8] at ($(cell1.north west)+(0.5pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell1.north west)+(0pt,-10pt)$){$\tt to_1$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell1.north west)+(0pt,-20pt)$){\cross};
\node[name=succ1,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell1.east)+(-3pt,0pt)$) {};
\draw ($(cell1.north west)+(0pt,-10pt)$) -- ($(cell1.north west)+(10pt,-10pt)$);
\draw ($(cell1.north west)+(0pt,-20pt)$) -- ($(cell1.north west)+(10pt,-20pt)$);
\draw ($(cell1.north west)+(10pt,0pt)$) -- ($(cell1.south west)+(10pt,0pt)$);

\draw[->] (succ0) -- (cell1);


\node[rounded corners,draw,name=cell2,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell1.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,color = blue,font=\tiny,inner sep=0pt] at ($(cell2.north west)+(0pt,0pt)$){{$\tt d_2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell2.north west)+(0pt,-10pt)$){$\tt to_2$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell2.north west)+(0pt,-20pt)$){\cross};
\node[name=succ2,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell2.east)+(-3pt,0pt)$) {};
\draw ($(cell2.north west)+(0pt,-10pt)$) -- ($(cell2.north west)+(10pt,-10pt)$);
\draw ($(cell2.north west)+(0pt,-20pt)$) -- ($(cell2.north west)+(10pt,-20pt)$);
\draw ($(cell2.north west)+(10pt,0pt)$) -- ($(cell2.south west)+(10pt,0pt)$);

\draw[->] (succ1) -- (cell2);


\node[rounded corners,draw,name=cell3,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell2.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,color = red,font=\tiny,inner sep=0pt] at ($(cell3.north west)+(0pt,0pt)$){{$\tt d_1$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell3.north west)+(0pt,-10pt)$){$\tt to_3$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell3.north west)+(0pt,-20pt)$){\cross};
\node[name=succ3,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell3.east)+(-3pt,0pt)$) {};
\draw ($(cell3.north west)+(0pt,-10pt)$) -- ($(cell3.north west)+(10pt,-10pt)$);
\draw ($(cell3.north west)+(0pt,-20pt)$) -- ($(cell3.north west)+(10pt,-20pt)$);
\draw ($(cell3.north west)+(10pt,0pt)$) -- ($(cell3.south west)+(10pt,0pt)$);

\node[rounded corners,draw,name=cell4,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell3.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell4.north west)+(0pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell4.north west)+(0pt,-10pt)$){$\tt to_4$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell4.north west)+(0pt,-20pt)$){\cross};
\draw ($(cell4.north west)+(0pt,-10pt)$) -- ($(cell4.north west)+(10pt,-10pt)$);
\draw ($(cell4.north west)+(0pt,-20pt)$) -- ($(cell4.north west)+(10pt,-20pt)$);
\draw ($(cell4.north west)+(10pt,0pt)$) -- ($(cell4.south west)+(10pt,0pt)$);
\draw[->] (succ2) -- (cell3);
\draw[->] (succ3) -- (cell4);
\node[name=succ4,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell4.east)+(-3pt,0pt)$) {};
\node[name=cell5] at ($(cell4.east)+(20pt,0pt)$){$\bot$};
\draw[->] (succ4) -- (cell5);



%%NEXT LIST

\node[rounded corners,draw,name=cell6,minimum width=16pt, minimum height=30pt] at ($(cell0.east)+(37pt,-0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt,scale=0.8] at ($(cell6.north west)+(0.5pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell6.north west)+(0pt,-10pt)$){$\tt to_4$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell6.north west)+(0pt,-20pt)$){\cross};
\node[name=succ6,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell6.east)+(-3pt,0pt)$) {};
\draw ($(cell6.north west)+(0pt,-10pt)$) -- ($(cell6.north west)+(10pt,-10pt)$);
\draw ($(cell6.north west)+(0pt,-20pt)$) -- ($(cell6.north west)+(10pt,-20pt)$);
\draw ($(cell6.north west)+(10pt,0pt)$) -- ($(cell6.south west)+(10pt,0pt)$);
\draw[->] (succ01) -- (cell6);

\node[rounded corners,draw,name=cell7,minimum width=16pt, minimum height=30pt] at ($(cell6.east)+(20pt,-0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt,scale=0.8] at ($(cell7.north west)+(0.5pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell7.north west)+(0pt,-10pt)$){$\tt to_4$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell7.north west)+(0pt,-20pt)$){\cross};
\node[name=succ7,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell7.east)+(-3pt,0pt)$) {};
\draw ($(cell7.north west)+(0pt,-10pt)$) -- ($(cell7.north west)+(10pt,-10pt)$);
\draw ($(cell7.north west)+(0pt,-20pt)$) -- ($(cell7.north west)+(10pt,-20pt)$);
\draw ($(cell7.north west)+(10pt,0pt)$) -- ($(cell7.south west)+(10pt,0pt)$);
\draw[->] (succ6) -- (cell7);

\node[name=cell8] at ($(cell7.east)+(20pt,0pt)$){$\bot$};
\draw[->] (succ7) -- (cell8);

%% LAST LIST

\node[rounded corners,draw,name=cell13,minimum width=16pt, minimum height=30pt] at ($(cell0.east)+(37pt,-40pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt,scale=0.8] at ($(cell13.north west)+(0.5pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell13.north west)+(0pt,-10pt)$){$\tt to_1$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell13.north west)+(0pt,-20pt)$){\tick};
\node[name=succ13,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell13.east)+(-3pt,0pt)$) {};
\draw ($(cell13.north west)+(0pt,-10pt)$) -- ($(cell13.north west)+(10pt,-10pt)$);
\draw ($(cell13.north west)+(0pt,-20pt)$) -- ($(cell13.north west)+(10pt,-20pt)$);
\draw ($(cell13.north west)+(10pt,0pt)$) -- ($(cell13.south west)+(10pt,0pt)$);
\node[anchor=south,font=\tiny,align=center] at ($(cell13.north)+(0pt,-2pt)$) {{\tt myTop[2]}};

\draw[->] (succ02) -- (cell13);


\node[rounded corners,draw,name=cell23,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell13.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,color = blue,font=\tiny,inner sep=0pt] at ($(cell23.north west)+(0pt,0pt)$){{$\tt d_2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell23.north west)+(0pt,-10pt)$){$\tt to_5$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell23.north west)+(0pt,-20pt)$){\tick};
\node[name=succ23,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell23.east)+(-3pt,0pt)$) {};
\draw ($(cell23.north west)+(0pt,-10pt)$) -- ($(cell23.north west)+(10pt,-10pt)$);
\draw ($(cell23.north west)+(0pt,-20pt)$) -- ($(cell23.north west)+(10pt,-20pt)$);
\draw ($(cell23.north west)+(10pt,0pt)$) -- ($(cell23.south west)+(10pt,0pt)$);

\draw[->] (succ13) -- (cell23);


\node[rounded corners,draw,name=cell33,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell23.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell33.north west)+(0pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell33.north west)+(0pt,-10pt)$){$\tt to_6$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt]at ($(cell33.north west)+(0pt,-20pt)$){\tick};
\node[name=succ33,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell33.east)+(-3pt,0pt)$) {};
\draw ($(cell33.north west)+(0pt,-10pt)$) -- ($(cell33.north west)+(10pt,-10pt)$);
\draw ($(cell33.north west)+(0pt,-20pt)$) -- ($(cell33.north west)+(10pt,-20pt)$);
\draw ($(cell33.north west)+(10pt,0pt)$) -- ($(cell33.south west)+(10pt,0pt)$);

\node[rounded corners,draw,name=cell43,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell33.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell43.north west)+(0pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell43.north west)+(0pt,-10pt)$){$\tt to_6$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell43.north west)+(0pt,-20pt)$){\cross};
\draw ($(cell43.north west)+(0pt,-10pt)$) -- ($(cell43.north west)+(10pt,-10pt)$);
\draw ($(cell43.north west)+(0pt,-20pt)$) -- ($(cell43.north west)+(10pt,-20pt)$);
\draw ($(cell43.north west)+(10pt,0pt)$) -- ($(cell43.south west)+(10pt,0pt)$);
\node[anchor=south,font=\tiny,align=center] at ($(cell43.north)+(0pt,-2pt)$) {{${\tt youngest[2], n[2]}$}};
\draw[->] (succ23) -- (cell33);
\draw[->] (succ33) -- (cell43);
\node[name=succ43,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell43.east)+(-3pt,0pt)$) {};



\node[rounded corners,draw,name=cell53,minimum width=16pt, minimum height=30pt,anchor=west]
at ($(cell43.east)+(10pt,0pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell53.north west)+(0pt,0pt)$){{$\tt d_3$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell53.north west)+(0pt,-10pt)$){$\tt to_6$};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cell53.north west)+(0pt,-20pt)$){\cross};
\draw ($(cell53.north west)+(0pt,-10pt)$) -- ($(cell53.north west)+(10pt,-10pt)$);
\draw ($(cell53.north west)+(0pt,-20pt)$) -- ($(cell53.north west)+(10pt,-20pt)$);
\draw ($(cell53.north west)+(10pt,0pt)$) -- ($(cell53.south west)+(10pt,0pt)$);
\draw[->] (succ43) -- (cell53);
\draw[->] (succ33) -- (cell43);
\node[name=succ53,circle,fill,minimum size=3pt,inner sep=0pt,outer sep=0pt] at ($(cell53.east)+(-3pt,0pt)$) {};



\node[name=cell63] at ($(cell53.east)+(20pt,0pt)$){$\bot$};
\draw[->] (succ53) -- (cell63);


\node[draw, name=cellto,minimum width=50pt, minimum height=60pt,anchor=west]
at ($(cell53.east)+(40pt,40pt)$){};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,0pt)$){{$\tt to_1: > d_1; > d2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-10pt)$){{$\tt to_2: > d_1; \leq d2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-20pt)$){{$\tt to_3: =d_1; <d2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-30pt)$){{$\tt to_4: <d_1; <d2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-40pt)$){{$\tt to_5: >d_1; \geq d2$}};
\node[minimum width=10pt, minimum height=10pt,anchor=north west,font=\tiny,inner sep=0pt] at ($(cellto.north west)+(3pt,-50pt)$){{$\tt to_6: >d_1; \neq d2$}};
\node[anchor=south,font=\tiny,align=center] at ($(cellto.north)+(0pt,0pt)$) {{\tt times order}};



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{tikzpicture}
